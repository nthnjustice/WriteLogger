<div class="card hoverable">
	<div class="card-content cyan darken-1 white-text">
		<span class="card-title"><h5>Log Writing Session</h5></span>
		<div class="divider"></div>
		<div id="custom-error-log" class="row center hidden">
			<div class="card-panel red lighten-5">
				<span class="red-text text-darken-4">
					The form contains errors, check that:
					<ul>
						<li>* Title is not blank</li>
						<li>* Hours is not blank</li>
						<li>* Minutes is not blank</li>
					</ul>
				</span>
			</div>
		</div>
		<br>
		<div id="micropost-log-form">
			<br>
			<div class="input-field">
				<input id="title" type="text">
				<label for="title" class="white-text">Title <span class="red-text">*</span></label>
			</div>
			<div class="row">
				<div class="col l6">
					<div class="input-field">
						<input id="hours" type="number" value=0>
						<label for="hours" class="white-text">Hours <span class="red-text">*</span></label>
					</div>
				</div>
				<div class="col l6">
					<div class="input-field">
						<input id="minutes" type="number" value=0>
						<label for="minutes" class="white-text">Minutes <span class="red-text">*</span></label>
					</div>
				</div>
			</div>
		</div>
		<div class="row center">
			<a id="submit-log" class="waves-effect waves-light btn green darken-3">
				Post <i class="material-icons right">send</i>
			</a>
  	</div>
	</div>
</div>

<script>
	var errorShowing = false
	
  $("#submit-log").click(function() {
  	if($("#title").val() === "" || $("#hours").val() === "" || $("#minutes").val() === "") {
  		if (errorShowing == false) {
  			$("#custom-error-log").toggleClass("hidden");
  			errorShowing = true;
  		}
  		return(0);
  	}

  	$.ajax({
	    url: "/microposts",
	    type: "POST",
	    data: {
	      micropost: {
	        title: $("#title").val(),
	        author: "<%= current_user.name %>",
	        hours: $("#hours").val(),
	        minutes: $("#minutes").val()
	      }
	    }
	  });
  });
</script>